<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feliz Cumplea√±os, mi amor</title>

<style>
/* ======== ESTILOS GENERALES ======== */
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg,rgb(218, 173, 208));
  overflow-x: hidden;
}

button {
  background:#d6336c;
  color:white;
  border:none;
  padding:10px 20px;
  border-radius:20px;
  cursor:pointer;
  font-size:16px;
  margin-top:20px;
  transition:0.3s;
}
button:hover { background:#b02555; }

.overlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  z-index:9999;
  color:#fff;
  background:#111;
}
.overlay-container {
  background:#222;
  padding:30px;
  border-radius:12px;
  max-width:450px;
  width:90%;
  box-shadow:0 0 20px rgba(255,255,255,0.2);
}
.overlay h2 {
  margin-bottom:20px;
  font-size:1.5rem;
  min-height:50px;
}
.option {
  display:block;
  margin:10px 0;
  padding:12px;
  background:#333;
  border-radius:8px;
  cursor:pointer;
  transition:background 0.3s, transform 0.3s, opacity 0.5s;
  opacity:0;
  transform:translateY(20px);
}
.option.visible { opacity:1; transform:translateY(0); }
.option:hover { background:#555; }
#message { margin-top:15px; min-height:20px; font-weight:bold; }
</style>
</head>
<body>

<!-- =====================================================
     PREPANTALLA
===================================================== -->
<div id="prep-overlay" class="overlay">
  <div class="overlay-container">
    <h2>¬øEst√°s lista para abrir tu regalo?</h2>
    <div class="option" id="prep-si">S√≠</div>
    <div class="option" id="prep-no">No</div>
  </div>
</div>

<!-- =====================================================
     PANTALLA "NO"
===================================================== -->
<div id="no-overlay" class="overlay" style="display:none;">
  <div class="overlay-container" id="no-container">
    <h2 id="no-message">Tienes que darle al S√≠ iluminada m√≠a</h2>
    <div class="option" id="no-si">S√≠</div>
    <img src="calvo.jpg" alt="No" style="width:100%; border-radius:10px; margin-top:10px;">
  </div>
</div>

<!-- =====================================================
     PANTALLA DE CARGA
===================================================== -->
<div id="loading-overlay" class="overlay" style="display:none;">
  <div class="overlay-container">
    <h2>Prep√°rate gafotas que esta no te la sabes...</h2>
    <img src="gato.jpg" alt="Loading" style="width:100%; border-radius:10px; margin-top:10px;">
  </div>
</div>

<!-- =====================================================
     QUIZ
===================================================== -->
<div id="quiz-overlay" class="overlay" style="display:none;">
  <div class="overlay-container">
    <h2 id="quiz-question"></h2>
    <div id="options-container"></div>
    <div id="message"></div>
  </div>
</div>

<!-- =====================================================
     AUDIOS
===================================================== -->
<audio id="quiz-music" loop>
  <source src="quiz.mp3" type="audio/mpeg">
</audio>
<audio id="sound-option" preload="auto">
  <source src="hover.mp3" type="audio/mpeg">
</audio>
<audio id="correct-sound" preload="auto">
  <source src="correct.mp3" type="audio/mpeg">
</audio>

<script>
/* =====================================================
   ELEMENTOS
===================================================== */
const prepSi = document.getElementById('prep-si');
const prepNo = document.getElementById('prep-no');
const noSi = document.getElementById('no-si');
const prepOverlay = document.getElementById('prep-overlay');
const noOverlay = document.getElementById('no-overlay');
const loadingOverlay = document.getElementById('loading-overlay');
const quizOverlay = document.getElementById('quiz-overlay');
const message = document.getElementById('message');
const music = document.getElementById('quiz-music');
const quizQuestionElem = document.getElementById("quiz-question");
const optionsContainer = document.getElementById("options-container");
const soundOption = document.getElementById("sound-option");
const correctSound = document.getElementById("correct-sound");

music.volume = 0.2;
soundOption.volume = 0.3;
correctSound.volume = 0.3;

/* =====================================================
   ANIMACION BOTONES PREPANTALLA
===================================================== */
[prepSi, prepNo].forEach((btn,i)=>{ setTimeout(()=>btn.classList.add('visible'), i*400); });

/* =====================================================
   EVENTOS BOTONES PREPANTALLA
===================================================== */
prepSi.addEventListener('click', ()=>{
  prepOverlay.style.display='none';
  loadingOverlay.style.display='flex';
  setTimeout(iniciarQuiz,6000);
});

prepNo.addEventListener('click', ()=>{
  prepOverlay.style.display='none';
  noOverlay.style.display='flex';
  prepNo.style.display='none';
  setTimeout(()=>noSi.classList.add('visible'),100);
});

noSi.addEventListener('click', ()=>{
  noOverlay.style.display='none';
  loadingOverlay.style.display='flex';
  setTimeout(iniciarQuiz,3800);
});

/* =====================================================
   INICIAR QUIZ
===================================================== */
function iniciarQuiz(){
  loadingOverlay.style.display='none';
  quizOverlay.style.display='flex';
  if(music.readyState>=2){ music.currentTime=0; music.play().catch(err=>console.log(err)); }

  const pregunta = "¬øCu√°ntos d√≠as tardaste en pedirme que te hiciera la cena?";
  mostrarPreguntaMaquina(pregunta, quizQuestionElem,50, mostrarOpciones);
}

/* =====================================================
   OPCIONES DEL QUIZ
===================================================== */
const opcionesData = [
  { text:"5", correct:false },
  { text:"23", correct:false },
  { text:"10", correct:true },
  { text:"14", correct:false }
];

function mostrarOpciones(){
  optionsContainer.innerHTML="";
  opcionesData.forEach((opt,i)=>{
    const btn=document.createElement("div");
    btn.className="option";
    btn.textContent=opt.text;
    btn.dataset.correct=opt.correct;

    btn.addEventListener('mouseenter',()=>{ 
      if(soundOption.readyState>=2){ 
        soundOption.currentTime=0; 
        soundOption.play().catch(err=>console.log(err)); 
      } 
    });

    btn.onclick=()=>{
      if(opt.correct){
        message.textContent="¬°Correctooo! ‚ù§Ô∏è";
        message.style.color="lightgreen";

        correctSound.currentTime=0;
        correctSound.play().catch(err=>console.log(err));

        // Detener m√∫sica completamente
        music.pause();
        music.currentTime=0;

        // ‚úÖ Redirigir a x.html
        setTimeout(()=>{
          window.location.href = "page.html";
        },1000);

      } else {
        message.textContent="No era esa, mi vida. üòò Intentalo de nuevo.";
        message.style.color="red"; 
        setTimeout(()=>message.textContent="",3000);
      }
    };

    optionsContainer.appendChild(btn);
    setTimeout(()=>btn.classList.add('visible'), i*600);
  });
}

/* =====================================================
   FUNCIONES AUXILIARES
===================================================== */
function mostrarPreguntaMaquina(texto, elemento, velocidad=30, callback){
  elemento.textContent=""; 
  let i=0;
  const intervalo=setInterval(()=>{
    elemento.textContent+=texto[i]; 
    i++;
    if(i>=texto.length){ clearInterval(intervalo); if(callback) callback(); }
  }, velocidad);
}
</script>

</body>
</html>
