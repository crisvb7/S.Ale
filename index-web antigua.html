<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feliz Cumplea√±os, mi amor</title>

<!-- =====================================================
     ESTILOS
===================================================== -->
<style>
/* ======== ESTILOS GENERALES ======== */
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg,rgb(218, 173, 208));
  overflow-x: hidden;
}

button {
  background:#d6336c;
  color:white;
  border:none;
  padding:10px 20px;
  border-radius:20px;
  cursor:pointer;
  font-size:16px;
  margin-top:20px;
  transition:0.3s;
}
button:hover { background:#b02555; }

/* ======== OVERLAYS ======== */
.overlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  z-index:9999;
  color:#fff;
  background:#111;
}
.overlay-container {
  background:#222;
  padding:30px;
  border-radius:12px;
  max-width:450px;
  width:90%;
  box-shadow:0 0 20px rgba(255,255,255,0.2);
}
.overlay h2 {
  margin-bottom:20px;
  font-size:1.5rem;
  min-height:50px;
}
.option {
  display:block;
  margin:10px 0;
  padding:12px;
  background:#333;
  border-radius:8px;
  cursor:pointer;
  transition:background 0.3s, transform 0.3s, opacity 0.5s;
  opacity:0;
  transform:translateY(20px);
}
.option.visible { opacity:1; transform:translateY(0); }
.option:hover { background:#555; }
#message { margin-top:15px; min-height:20px; font-weight:bold; }

/* ======== CONTENIDO PRINCIPAL ======== */
#main-content { background-color:rgb(218, 173, 208); display:none; opacity:0; transition:opacity 1s ease; }

h1, h2.section-title {
  text-align:center;
  font-family:'Brush Script MT', cursive;
  color:#d6336c;
}
h1 {
  font-size:3rem;
  margin-top:40px;
  opacity:0;
  transform:translateY(20px);
  transition:all 1s ease;
}
h1.visible { opacity:1; transform:translateY(0); }

h2.section-title {
  font-size:2rem;
  margin-bottom:20px;
  opacity:0;
  transform:translateY(20px);
  transition:all 1s ease;
}
h2.section-title.visible { opacity:1; transform:translateY(0); }

.section {
  padding:40px 20px;
  max-width:800px;
  margin:auto;
  text-align:center;
  opacity:0;
  transform:translateY(30px);
  transition:all 1s ease;
}
.section.visible { opacity:1; transform:translateY(0); }

#sorpresa {
  display:none;
  background:#fff0f5;
  padding:20px;
  border-radius:10px;
  margin-top:20px;
  font-style:italic;
  font-size:1.3rem;
  color:#b02555;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

.gallery {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(150px,1fr));
  gap:10px;
  margin-top:20px;
}
.gallery img {
  width:100%;
  border-radius:10px;
  transition:transform 0.3s ease, opacity 1s ease;
  cursor:pointer;
  opacity:0;
  transform:translateY(20px);
}
.gallery img.visible { opacity:1; transform:translateY(0); }
.gallery img:hover { transform:scale(1.05); }

footer {
  text-align:center;
  padding:20px;
  font-size:14px;
  color:#777;
  margin-top:40px;
  opacity:0;
  transform:translateY(20px);
  transition:all 1s ease;
}
footer.visible { opacity:1; transform:translateY(0); }

/* ======== CORAZONES FLOTANTES ======== */
.heart {
  position: fixed;
  bottom: 0;
  width: var(--size, 20px);
  height: var(--size, 20px);
  background: red;
  transform: rotate(-45deg);
  animation: floatUp 4s linear forwards;
  z-index: 1000;
}

.heart::before,
.heart::after {
  content: "";
  position: absolute;
  width: 100%;
  height: 100%;
  background: red;
  border-radius: 50%;
}

.heart::before {
  top: -50%;
  left: 0;
}

.heart::after {
  top: 0;
  left: 50%;
}

@keyframes floatUp {
  0% {
    transform: translateX(0) translateY(0) rotate(-45deg);
    opacity: 1;
  }
  100% {
    transform: translateX(calc(-50px + 100px * var(--randX))) translateY(-600px) rotate(-45deg);
    opacity: 0;
  }
}

/* ====== SLIDER FADE ====== */
.slider-fade {
  position: relative;
  max-width: 500px;
  margin: auto;
  overflow: hidden;
  border-radius: 10px;
}

.slide {
  position: absolute;
  width: 100%;
  opacity: 0;
  transition: opacity 0.8s ease-in-out;
}

.slide.visible { opacity: 1; position: relative; }

.slide img {
  width: 100%;
  border-radius: 10px;
  display: block;
}

.prev, .next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(214,51,108,0.8);
  border: none;
  color: white;
  font-size: 2rem;
  padding: 5px 12px;
  cursor: pointer;
  border-radius: 50%;
  z-index: 10;
  transition: background 0.3s;
}

.caption{
  font-size: 2.7rem;
  color: rgba(214,51,108,0.8);
  text-align: center;
  font-family:'Brush Script MT';
}

.prev:hover, .next:hover { background: rgba(176,37,85,0.9); }
.prev { left: 10px; }
.next { right: 10px; }
</style>
</head>
<body>


<!-- =====================================================
     PREPANTALLA
===================================================== -->
<div id="prep-overlay" class="overlay">
  <div class="overlay-container">
    <h2>¬øEst√°s lista para abrir tu regalo?</h2>
    <div class="option" id="prep-si">S√≠</div>
    <div class="option" id="prep-no">No</div>
  </div>
</div>

<!-- =====================================================
     PANTALLA "NO"
===================================================== -->
<div id="no-overlay" class="overlay" style="display:none;">
  <div class="overlay-container" id="no-container">
    <h2 id="no-message">Tienes que darle al S√≠ iluminada m√≠a</h2>
    <div class="option" id="no-si">S√≠</div>
    <img src="calvo.jpg" alt="No" style="width:100%; border-radius:10px; margin-top:10px;">
  </div>
</div>

<!-- =====================================================
     PANTALLA DE CARGA
===================================================== -->
<div id="loading-overlay" class="overlay" style="display:none;">
  <div class="overlay-container">
    <h2>Prep√°rate gafotas que esta no te la sabes...</h2>
    <img src="gato.jpg" alt="Loading" style="width:100%; border-radius:10px; margin-top:10px;">
  </div>
</div>

<!-- =====================================================
     QUIZ
===================================================== -->
<div id="quiz-overlay" class="overlay" style="display:none;">
  <div class="overlay-container">
    <h2 id="quiz-question"></h2>
    <div id="options-container"></div>
    <div id="message"></div>
  </div>
</div>

<!-- =====================================================
     AUDIOS
===================================================== -->
<audio id="quiz-music" loop>
  <source src="quiz.mp3" type="audio/mpeg">
</audio>
<audio id="sound-option" preload="auto">
  <source src="hover.mp3" type="audio/mpeg">
</audio>
<audio id="correct-sound" preload="auto">
  <source src="correct.mp3" type="audio/mpeg">
</audio>
<audio id="song" loop>
  <source src="song.mp3" type="audio/mpeg">
</audio>
<!-- =====================================================
     CONTENIDO PRINCIPAL
===================================================== -->
<div id="main-content">
  
  <h1>üéâ Feliz Cumplea√±os, mi amor üéâ</h1>

  <div class="section">
    <h2 class="section-title">üíå Mensaje para Ti</h2>
    <p class="reveal">Hoy estamos de celebraci√≥n por tu cumplea√±os, pero yo todos los d√≠as celebro cada instante que paso contigo. Tu risa, tus abrazos, tus mordiscos... todo eso que me hace sentir que estoy compartiendo mi vida con la persona indicada.</p>
    <p class="reveal">Gracias por ser como eres, gracias por ser el amor de mi vida. Por elegirme. Por hacerme mejor. Por aguantar lo inaguantable conmigo. Te amo m√°s de lo que mis palabras pueden expresar.</p>
    <button onclick="mostrarSorpresa()">Prometo...</button>
    <div id="sorpresa">‚ú® seguir construyendo contigo cada d√≠a, cada sue√±o, cada aventura. Siempre estar√© junto a t√≠ para cuidarte mi vidi. ‚ú®</div>
  </div>

  <div class="section">
    <h2 class="section-title">üì∏ √Ålbum de Fotos</h2>
    <div class="slider-fade">
      <div class="slide visible">
        <p class="caption">Nuestra primera foto</p>
        <img src="1.jpg">
      </div>
      <div class="slide">
        <p class="caption">Nuestro primer viaje juntos</p>
        <img src="2.jpg">
      </div>
      <div class="slide">
        <p class="caption">Una foto que te gusta mucho :)</p>
        <img src="3.jpg">
      </div>
      <div class="slide">
        <p class="caption">Nuestras primeras navidades juntos</p>
        <img src="4.jpg">
      </div>
      <div class="slide">
        <p class="caption">La primera vez que me hice caca delante tuyo</p>
        <img src="5.jpg">
      </div>
      <div class="slide">
        <p class="caption">Cuando te humillaba al golf</p>
        <img src="10.jpg">
      </div>
      <div class="slide">
        <p class="caption">Nuestra primera vez en el mejor campo de asturias juntos ;)</p>
        <img src="6.jpg">
      </div>
      <div class="slide">
        <p class="caption">Un d√≠a muy feliz <3</p>
        <img src="7.jpg">
      </div>
      <div class="slide">
        <p class="caption">Nuestro mundo juntos</p>
        <img src="8.jpg">
      </div>
      <div class="slide">
        <p class="caption">Y lo que nos queda por vivir juntos...</p>
        <img src="9.jpg">
      </div>
      <button class="prev">&#10094;</button>
      <button class="next">&#10095;</button>
    </div>
  </div>

  <footer>Hecho con mucho amor para ti, mi vida. Felices 22 a√±itos princesa.</footer>
</div>

<!-- =====================================================
     JAVASCRIPT
===================================================== -->
<script>
/* =====================================================
   ELEMENTOS
===================================================== */
const prepSi = document.getElementById('prep-si');
const prepNo = document.getElementById('prep-no');
const noSi = document.getElementById('no-si');
const prepOverlay = document.getElementById('prep-overlay');
const noOverlay = document.getElementById('no-overlay');
const loadingOverlay = document.getElementById('loading-overlay');
const quizOverlay = document.getElementById('quiz-overlay');
const mainContent = document.getElementById('main-content');
const message = document.getElementById('message');
const music = document.getElementById('quiz-music');
const quizQuestionElem = document.getElementById("quiz-question");
const optionsContainer = document.getElementById("options-container");
const soundOption = document.getElementById("sound-option");
const correctSound = document.getElementById("correct-sound");
const song = document.getElementById("song");

music.volume = 0.2;
soundOption.volume = 0.3;
correctSound.volume = 0.3;
song.volume = 0.3;

/* =====================================================
   ANIMACION BOTONES PREPANTALLA
===================================================== */
[prepSi, prepNo].forEach((btn,i)=>{ setTimeout(()=>btn.classList.add('visible'), i*400); });

/* =====================================================
   EVENTOS BOTONES PREPANTALLA
===================================================== */
prepSi.addEventListener('click', ()=>{
  prepOverlay.style.display='none';
  loadingOverlay.style.display='flex';
  setTimeout(iniciarQuiz,6000);
});

prepNo.addEventListener('click', ()=>{
  prepOverlay.style.display='none';
  noOverlay.style.display='flex';
  prepNo.style.display='none';
  setTimeout(()=>noSi.classList.add('visible'),100);
});

noSi.addEventListener('click', ()=>{
  noOverlay.style.display='none';
  loadingOverlay.style.display='flex';
  setTimeout(iniciarQuiz,3800);
});

/* =====================================================
   INICIAR QUIZ
===================================================== */
function iniciarQuiz(){
  loadingOverlay.style.display='none';
  quizOverlay.style.display='flex';
  if(music.readyState>=2){ music.currentTime=0; music.play().catch(err=>console.log(err)); }

  const pregunta = "¬øCu√°ntos d√≠as tardaste en pedirme que te hiciera la cena?";
  mostrarPreguntaMaquina(pregunta, quizQuestionElem,50, mostrarOpciones);
}

/* =====================================================
   OPCIONES DEL QUIZ
===================================================== */
const opcionesData = [
  { text:"5", correct:false },
  { text:"23", correct:false },
  { text:"10", correct:true },
  { text:"14", correct:false }
];

function mostrarOpciones(){
  optionsContainer.innerHTML="";
  opcionesData.forEach((opt,i)=>{
    const btn=document.createElement("div");
    btn.className="option";
    btn.textContent=opt.text;
    btn.dataset.correct=opt.correct;

    btn.addEventListener('mouseenter',()=>{ 
      if(soundOption.readyState>=2){ 
        soundOption.currentTime=0; 
        soundOption.play().catch(err=>console.log(err)); 
      } 
    });

    btn.onclick=()=>{
      if(opt.correct){
        message.textContent="¬°Correctooo! ‚ù§Ô∏è";
        message.style.color="lightgreen";

        correctSound.currentTime=0;
        correctSound.play().catch(err=>console.log(err));

        // Detener m√∫sica completamente
        music.pause();
        music.currentTime=0;

        setTimeout(()=>{
  quizOverlay.style.display="none";
  mainContent.style.display="block";
  setTimeout(()=>mainContent.style.opacity="1",50);
  lanzarCorazones(); 
  revealOnScroll();

  const song = document.getElementById("song");
  if(song.readyState >= 2){
    song.currentTime = 0;
    song.play().catch(err => console.log("Error al reproducir canci√≥n:", err));
  }
},1000);


      } else {
        message.textContent="No era esa, mi vida. üòò Intentalo de nuevo.";
        message.style.color="red"; 
        setTimeout(()=>message.textContent="",3000);
      }
    };

    optionsContainer.appendChild(btn);
    setTimeout(()=>btn.classList.add('visible'), i*600);
  });
}

/* =====================================================
   FUNCIONES AUXILIARES
===================================================== */
function mostrarSorpresa(){ 
  document.getElementById("sorpresa").style.display="block"; 
}

function lanzarCorazones() {
  const interval = setInterval(() => {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.setProperty("--randX", Math.random());
    const size = 15 + Math.random() * 25;
    heart.style.setProperty("--size", size + "px");
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 4000);
  }, 300);
  setTimeout(() => clearInterval(interval), 10000);
}


function revealOnScroll(){
  const elems=document.querySelectorAll('.reveal, .section, .gallery img, h1, h2.section-title, footer');
  const reveal=()=>{
    const h=window.innerHeight;
    elems.forEach(el=>{ if(el.getBoundingClientRect().top<h-50) el.classList.add('visible'); });
  };
  window.addEventListener('scroll',reveal); 
  reveal();
}

function mostrarPreguntaMaquina(texto, elemento, velocidad=30, callback){
  elemento.textContent=""; 
  let i=0;
  const intervalo=setInterval(()=>{
    elemento.textContent+=texto[i]; 
    i++;
    if(i>=texto.length){ clearInterval(intervalo); if(callback) callback(); }
  }, velocidad);
}

/* ====== L√ìGICA SLIDER FADE ====== */
const slides = document.querySelectorAll('.slide');
const prevBtn = document.querySelector('.prev');
const nextBtn = document.querySelector('.next');
let currentSlide = 0;

function showSlideFade(index){
  slides.forEach((s,i)=>{
    s.classList.remove('visible');
    if(i === index) s.classList.add('visible');
  });
}

prevBtn.addEventListener('click', ()=>{
  currentSlide = (currentSlide - 1 + slides.length) % slides.length;
  showSlideFade(currentSlide);
});

nextBtn.addEventListener('click', ()=>{
  currentSlide = (currentSlide + 1) % slides.length;
  showSlideFade(currentSlide);
});

showSlideFade(currentSlide);
</script>

</body>
</html>
